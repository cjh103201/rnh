<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- namespace는 패키지.클래스이름을 의미 -->
<mapper namespace="com.rnh.showmethecard.model.mapper.CardMapper">

	<select id="selectCardDbBySiteUrl" resultType="String">
		SELECT card_no cardNo FROM CARD_DB WHERE site_url = #{siteUrl} AND deleted = 0;
	</select>
	
	<insert id="insertCardDb">
	
		INSERT INTO rnh2.CARD_DB
		(site_url, c_point, discoverer, c_name, c_rating)
		VALUES (#{siteUrl}, 0, #{discoverer}, #{cName}, 0)	
		
	</insert>
	
	<insert id="insertMyCard" parameterType="HashMap">
	
		INSERT INTO  rnh2.MY_CARD
		(card_no, f_no, myc_comment, scrap_count)
		VALUES (#{cardNo}, 190, #{mycComment}, 0)	
		
	</insert>
	
	<select id="selectMyCardByFNo" resultType="MyCardList" parameterType="int">
	SELECT myc_no mycNo, card_no cardNo, myc_comment mycComment, scrap_count scrapCount
	FROM rnh2.MY_CARD
	WHERE f_no = #{fNo}
	</select>
	
	<select id="selectUrlFromCardDbByCardNo" resultType="String" parameterType="int">
	SELECT site_url siteUrl
	FROM rnh2.CARD_DB
	WHERE card_no = #{cardNo}
	</select>
	
	<select id="selectMyCardListByFNo" resultType="MyCardList" parameterType="int">
		SELECT mc.MYC_NO  mycNo, mc.CARD_NO cardNo, mc.MYC_COMMENT mycComment, mc.SCRAP_COUNT scrapCount, cd.SITE_URL url
		FROM MY_CARD mc, CARD_DB cd
		WHERE mc.CARD_NO = cd.CARD_NO AND mc.F_NO=190;
	</select>
 	<!-- <select id="SelectNoticeList" resultType="Notice" parameterType="int">
	
		SELECT n_no nNo, title title, content content, m_id mId, reg_date regDate

		FROM NOTICE
		
		WHERE deleted = '0'
		
	</select>
	
	<insert id="InsertNotice" parameterType="Notice">
	
		INSERT INTO NOTICE
		(N_NO, TITLE, CONTENT, M_ID)
		VALUES (NOTICE_SEQUENCE.nextVal, #{title}, #{content}, #{M_id})	
		
	</insert>
	
	
	
	<update id="DeleteNotice" parameterType="Notice">
	
		UPDATE NOTICE
		SET deleted = '1', TITLE = #{title}
		WHERE N_NO = #{nNo}			
		
	</update>
	 
	
	<update id="UpdateNotice" parameterType="Notice">
	
		UPDATE NOTICE
		SET TITLE = #{title}, CONTENT = #{content}
		WHERE N_NO = #{nNo}	
		
	</update>	
	
	
	
	<select id="SelectNoticeDetail" parameterType="int" resultType="Notice">
	
		SELECT n_no nNo, title title, content content, m_id mId, reg_date regDate

		FROM NOTICE
		
		WHERE n_no = #{nNo}
		
	</select> -->

</mapper>



